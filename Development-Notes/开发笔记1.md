# 关于全局样式状态  
  
## 在Nuxt3项目内使用状态管理的一般性：  
  
**毫无疑问**在Vue为基础的项目内，使用状态管理的主流方法就是Pinia方法  
一般来说引入此方法会有以下两个步骤  
### stores文件目录下创建由pinia管理的函数与方法  
```ts
// ../stores/test
export const useTestStore = defineStore(
  'KippuBlog-public-test',
  () => {
    const PlaneOrSolid = ref(false)

    const KippuChenge = () => {
      PlaneOrSolid.value = !PlaneOrSolid.value
    }

    return {
      PlaneOrSolid,
      KippuChenge
    }
  },
  {
    persist: true // 持久化
  }
)
```  
在`const PlaneOrSolid = ref(false)`定义的毫无疑问是布尔值  
在`const KippuChenge = () => {`后也编辑了方法定义  
  
通过以下引入后
```ts
import { useTestStore } from '#imports'
const ChengeStore = useTestStore()
```  
把整个stores传入**自定义**的ChengeStore后就可以自由应用  
在前缀加上`ChengeStore`就可以自由使用  
诸如：
```vue
<ArticleCard  :PlaneOrSolid="ChengeStore.PlaneOrSolid"/>
```
或者KippuChenge方法  

### 持久化处理  
本意在本地存储目前状态方便用户的习惯，需要定义**plugins**文件内的**pinia.ts**文件  
```ts
//来自haruki
import { defineNuxtPlugin } from '#app'
import { usePinia } from '#imports'
import persistedState from 'pinia-plugin-persistedstate'

export default defineNuxtPlugin((_nuxtApp) => {
  // 客户端才能使用 persistedState
  if (import.meta.client) {
    // 这是 Nuxt 自动创建的 pinia 实例
    const pinia = usePinia()
    // 使用 pinia-plugin-persistedstate 插件，持久化
    pinia.use(persistedState)
  }
})
```  
  
- `defineNuxtPlugin` Nuxt 通过这个函数定义自定义插件  
- `usePinia` 这个函数用于获取 Nuxt 自动创建的 Pinia 实例  
- `pinia-plugin-persistedstate` 插件，它可以让 Pinia 状态在浏览器中持久化保存  
  
这些都是引入方法的一环  
  
但是在 Nuxt3 开发下这个步骤或许**不被需要**  
直接通过 Nuxt3 自带的开发组件 Modules 来实现一键式部署，所以 plugins 内的定义就不再需要  
  
### 2025.06.10 共勉

